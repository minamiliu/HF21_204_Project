/*******************************************************************************
* タイトル:		シマウマ
* プログラム名:	zebra.cpp
* 作成者:		小林玲雄
* 作成日:		2016/12/03
********************************************************************************
*******************************************************************************/
/*******************************************************************************
* インクルードファイル
*******************************************************************************/
/*******************************************************************************
* インクルードファイル
*******************************************************************************/
#include "zebra.h"
#include "manager.h"
#include "scene2D.h"

/*******************************************************************************
* マクロ定義
*******************************************************************************/
#define ZEBRA_TEX_NAME	"data/TEXTURE/サバンナタイトル用/シマウマ/zebra.png"
#define ANIM_PAT_X (7)
#define ANIM_PAT_Y (1)
#define ANIM_CANGE_FRAME (8)
/*******************************************************************************
* クラス定義
*******************************************************************************/
//*****************************************************************************
// マクロ定義
//*****************************************************************************
#define NUM_VERTEX		(4)			// 頂点数
#define NUM_POLYGON		(2)			// ポリゴン数
// 頂点フォーマット( 頂点座標[2D] / 頂点カラー / テクスチャ座標 )
#define	FVF_VERTEX_2D	(D3DFVF_XYZRHW | D3DFVF_DIFFUSE | D3DFVF_TEX1)
//*****************************************************************************
// 構造体定義
//*****************************************************************************

//*****************************************************************************
// 静的
//*****************************************************************************

//=============================================================================
// コンストラクタ
//=============================================================================
CZebra :: CZebra()
{
	m_time = 0;
	m_animPat = 0;
	
}
//=============================================================================
// デストラクタ
//=============================================================================
CZebra :: ~CZebra()
{
}
CZebra* CZebra::Create(D3DXVECTOR3 pos,D3DXVECTOR3 size)
{
	CZebra *pZebra;
	pZebra = new CZebra;
	pZebra->Init(pos,size);
	
	pZebra->Load(ZEBRA_TEX_NAME);
	return pZebra;
}
//=============================================================================
// ポリゴンの初期化処理
//=============================================================================
HRESULT CZebra :: Init(void)
{
	CScene2D::Init();


	return S_OK;
}
//=============================================================================
// ポリゴンの初期化処理(オーバーロード)
//=============================================================================
HRESULT CZebra :: Init(D3DXVECTOR3 pos,D3DXVECTOR3 size)
{
	CScene2D::Init(pos,size);

	CScene2D::SetTexture(ANIM_PAT_X,ANIM_PAT_Y,m_animPat);

	return S_OK;
}
//=============================================================================
// ポリゴンの終了処理
//=============================================================================
void CZebra :: Uninit(void)
{
	CScene2D::Uninit();
}
//=============================================================================
// ポリゴンの更新処理
//=============================================================================
void CZebra :: Update(void)
{
	D3DXVECTOR3 posZebra = GetPosition();
	D3DXVECTOR3 sizeZebra = GetSize();
	m_time++;
	if(m_time%ANIM_CANGE_FRAME == 0)
	{
		m_animPat++;
	}
	if(posZebra.x > 640)
	{
		posZebra.x-=2;
	}
	//if(posZebra.x < -sizeZebra.x)
	//{
	//	posZebra.x = SCREEN_WIDTH + 300/2;
	//}
	CScene2D::SetTexture(ANIM_PAT_X,ANIM_PAT_Y,m_animPat);

	this->CZebra::SetPosition(posZebra);
}
//=============================================================================
// ポリゴンの描画処理
//=============================================================================
void CZebra :: Draw(void)
{
	CScene2D::Draw();
}